{"ast":null,"code":"import _regeneratorRuntime from\"/home/landonrepp/Desktop/youtube-steamer/Client/IonicApp/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/landonrepp/Desktop/youtube-steamer/Client/IonicApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/landonrepp/Desktop/youtube-steamer/Client/IonicApp/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/landonrepp/Desktop/youtube-steamer/Client/IonicApp/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/landonrepp/Desktop/youtube-steamer/Client/IonicApp/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/landonrepp/Desktop/youtube-steamer/Client/IonicApp/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/landonrepp/Desktop/youtube-steamer/Client/IonicApp/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{IonGrid,IonRow,IonCol,IonRange}from'@ionic/react';import{Howl}from'howler';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{MediaService}from'../../services/MediaService';import{faPlay,faBackward,faForward,faPause}from'@fortawesome/free-solid-svg-icons';import'./MediaPlayer.css';import{GETURL}from'../../Constants';var MediaPlayer=/*#__PURE__*/function(_React$Component){_inherits(MediaPlayer,_React$Component);function MediaPlayer(){var _getPrototypeOf2;var _this;_classCallCheck(this,MediaPlayer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(MediaPlayer)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.Sounds=new Howl({src:[\"\"],format:[\"mp3\"]});_this.songSelected=false;_this.state={playing:false,videos:[],progress:0};_this.nextSong=function(){var i=0;var len=_this.state.videos.length;for(i=0;i<len;i++){if(_this.state.videos[i].selected){_this.playSong(_this.state.videos[(i+1)%len]);return;}}};_this.previousSong=function(){var i=0;var len=_this.state.videos.length;for(i=0;i<len;i++){if(_this.state.videos[i].selected){_this.playSong(_this.state.videos[(i-1)%len]);}}};_this.setProgress=function(){if(_this.Sounds.state()==\"loaded\"){_this.setState({progress:Number(_this.Sounds.seek())/_this.Sounds.duration()*100});}};_this.MusicList=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var videoInformation,results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return MediaService.getVideoInformation();case 2:videoInformation=_context.sent;results=videoInformation;_this.state.videos=results;_this.setState({videos:results});case 6:case\"end\":return _context.stop();}}},_callee);}));_this.CreateHowl=function(video){var videoUrl=\"\".concat(GETURL,\"/youtube?v=\").concat(video.videoID,\"&f=\").concat(video.ext);return new Howl({src:videoUrl,format:\"mp3\",volume:0.1,onend:function onend(id){console.log(\"song ended\");_this.nextSong();}});};_this.togglePlaying=function(){if(!_this.songSelected&&_this.state.videos.length>0){_this.songSelected=true;_this.playSong(_this.state.videos[0]);}else if(_this.state.playing){_this.Sounds.pause();_this.state.playing=false;}else{_this.Sounds.play();_this.state.playing=true;}_this.setState(_this.state);};_this.playSong=function(video){_this.state.videos.forEach(function(element,index){if(element.videoID==video.videoID){_this.state.videos[index].selected=true;}else{_this.state.videos[index].selected=false;}});_this.songSelected=true;var videoID=video.videoID;var ext=video.ext;_this.Sounds.unload();_this.Sounds=_this.CreateHowl(video);_this.Sounds.play();_this.state.playing=true;video.selected=true;_this.setState({videos:_this.state.videos});};_this.changeSongProgress=function(e){var val=e.target.value;if(val&&val!=_this.state.progress){_this.state.progress=val;_this.Sounds.seek(val/100*_this.Sounds.duration());}};return _this;}_createClass(MediaPlayer,[{key:\"componentDidMount\",value:function componentDidMount(){this.MusicList();setInterval(this.setProgress,1000);}},{key:\"render\",value:function render(){var element=React.createElement(\"div\",{onMouseUp:this.changeSongProgress},React.createElement(IonGrid,null,React.createElement(IonRow,null,React.createElement(IonCol,null),React.createElement(IonCol,{size:\"8\",sizeLg:\"4\"},React.createElement(IonRange,{className:\"media-progress-bar\",value:this.state.progress,onIonChange:this.changeSongProgress,color:\"secondary\",pin:false})),React.createElement(IonCol,null)),React.createElement(IonRow,null,React.createElement(IonCol,{size:\"1\"},React.createElement(FontAwesomeIcon,{size:\"2x\",onClick:this.previousSong,icon:faBackward})),React.createElement(IonCol,{size:\"1\"},React.createElement(FontAwesomeIcon,{className:\"pause-play\",onClick:this.togglePlaying,size:\"2x\",icon:this.state.playing?faPause:faPlay})),React.createElement(IonCol,{size:\"1\"},React.createElement(FontAwesomeIcon,{size:\"2x\",onClick:this.nextSong,icon:faForward})))));return element;}}]);return MediaPlayer;}(React.Component);export default MediaPlayer;","map":{"version":3,"sources":["/home/landonrepp/Desktop/youtube-steamer/Client/IonicApp/src/components/Media/MediaPlayer.tsx"],"names":["React","IonGrid","IonRow","IonCol","IonRange","Howl","FontAwesomeIcon","MediaService","faPlay","faBackward","faForward","faPause","GETURL","MediaPlayer","Sounds","src","format","songSelected","state","playing","videos","progress","nextSong","i","len","length","selected","playSong","previousSong","setProgress","setState","Number","seek","duration","MusicList","getVideoInformation","videoInformation","results","CreateHowl","video","videoUrl","videoID","ext","volume","onend","id","console","log","togglePlaying","pause","play","forEach","element","index","unload","changeSongProgress","e","val","target","value","setInterval","Component"],"mappings":"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","sourcesContent":["import React, { useState, Suspense } from 'react';\nimport { IonIcon, IonGrid, IonRow, IonCol, IonItem, IonRange, IonVirtualScroll, IonContent } from '@ionic/react';\nimport ReactDOM from 'react-dom'\nimport { arrowBackCircleOutline, arrowForwardCircleOutline, play, } from 'ionicons/icons'\nimport {Howl, Howler} from 'howler';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { MediaService } from '../../services/MediaService'\nimport { faCoffee, faPlay, faBackward, faForward, faPause } from '@fortawesome/free-solid-svg-icons'\nimport './MediaPlayer.css'\nimport { GETURL } from '../../Constants';\nimport { ScrollView } from 'react-native';\nimport ListHandler from '../ListHandler/ListHandler';\n\ninterface MeadiaPlayerProps {}\n\n\nexport interface ProgressBarProps {\n    progress:number\n}\n \nexport interface ProgressBarState {\n    \n}\n \n\nexport interface MediaPlayerProps {\n    \n}\n \nexport interface MediaPlayerState {\n    \n}\ninterface Video{\n    selected:boolean,\n    ext:string,\n    title:string,\n    videoID:string\n}\ninterface State{\n    playing:boolean,\n    videos:Video[],\n    progress:number\n}\n \nclass MediaPlayer extends React.Component<MediaPlayerProps, MediaPlayerState> {\n    Sounds = new Howl({src: [\"\"], format:[\"mp3\"]});\n    songSelected = false;\n    state:State = {\n        playing:false, \n        videos:[],\n        progress:0\n    };\n    nextSong = ()=>{\n        let i = 0;\n        const len = this.state.videos.length;\n        for(i = 0; i < len; i++){\n            if(this.state.videos[i].selected){\n                this.playSong(this.state.videos[(i+1)%len]);\n                return;\n            }\n        }\n    };\n    previousSong =()=>{\n        let i = 0;\n        const len = this.state.videos.length;\n        for(i = 0; i < len; i++){\n            if(this.state.videos[i].selected){\n                this.playSong(this.state.videos[(i-1)%len]);\n            }\n        }\n    }\n    setProgress = () =>{\n        if(this.Sounds.state() == \"loaded\"){\n            this.setState({progress:Number(this.Sounds.seek())/this.Sounds.duration()*100});\n        }\n        \n    };\n    \n\n    MusicList = async()=>{\n        let videoInformation = await MediaService.getVideoInformation();\n        let results:any[] = videoInformation;\n        this.state.videos = results;\n        this.setState({videos:results})\n    };\n    \n    CreateHowl = (video:Video)=>{\n        let videoUrl = `${GETURL}/youtube?v=${video.videoID}&f=${video.ext}`\n        return new Howl({\n            src:videoUrl, format:\"mp3\", volume:0.1,\n            onend: (id)=>{\n                console.log(\"song ended\")\n                this.nextSong();\n            }\n        });\n    };\n    togglePlaying = () =>{\n        if(!this.songSelected && this.state.videos.length > 0){\n            this.songSelected = true;\n            this.playSong(this.state.videos[0]);\n        }\n        else if(this.state.playing){\n            this.Sounds.pause();\n            this.state.playing = false;\n        }\n        else{\n            this.Sounds.play();\n            this.state.playing = true;\n        }\n        this.setState(this.state);\n    };\n\n    playSong = (video:Video)=>{\n        this.state.videos.forEach((element,index) => {\n            if(element.videoID == video.videoID){\n                this.state.videos[index].selected = true;\n            }\n            else{\n                this.state.videos[index].selected = false;\n            }\n        });\n        this.songSelected = true;\n        let videoID = video.videoID;\n        let ext = video.ext;\n        \n\n        this.Sounds.unload();\n        this.Sounds = this.CreateHowl(video);\n        this.Sounds.play();\n        this.state.playing = true;\n        video.selected = true;\n        this.setState({videos:this.state.videos});\n    };\n    changeSongProgress = (e:any)=>{\n        let val = (e.target as any).value as number;\n        if(val && val != this.state.progress){\n            this.state.progress = val;\n            this.Sounds.seek(val/100 * this.Sounds.duration())\n        }\n    }\n\n    componentDidMount(){\n        this.MusicList();\n        setInterval(this.setProgress,1000);\n    };\n\n    render() { \n        const element = (\n            <div onMouseUp={this.changeSongProgress}>\n                <IonGrid>\n                    <IonRow>\n                        <IonCol>\n                        </IonCol>\n                        <IonCol size=\"8\" sizeLg=\"4\">\n                            <IonRange className=\"media-progress-bar\" value={this.state.progress} onIonChange={this.changeSongProgress} color=\"secondary\" pin={false} />\n                        </IonCol>\n                        <IonCol>\n                        </IonCol>\n                    </IonRow>\n                    <IonRow>\n                        <IonCol size=\"1\">\n                            <FontAwesomeIcon size=\"2x\" onClick={this.previousSong} icon={faBackward} />\n                        </IonCol>\n                        <IonCol size=\"1\">\n                            <FontAwesomeIcon className=\"pause-play\" onClick={this.togglePlaying} size=\"2x\" icon={this.state.playing? faPause:faPlay} />\n                        </IonCol>\n                        <IonCol size=\"1\">\n                            <FontAwesomeIcon size=\"2x\" onClick={this.nextSong} icon={ faForward } />\n                        </IonCol>\n                    </IonRow>\n                </IonGrid>\n            </div>\n        );\n        return element;\n    }\n}\n \nexport default MediaPlayer;\n"]},"metadata":{},"sourceType":"module"}