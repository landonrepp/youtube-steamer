{"ast":null,"code":"import { GETURL } from '../Constants';\nexport class MediaService {}\n\nMediaService.arrToObject = arr => {\n  //assuming header\n  var keys = arr[0]; //vacate keys from main array\n\n  var newArr = arr.slice(1, arr.length);\n  var formatted = [],\n      data = newArr,\n      cols = keys,\n      l = cols.length;\n\n  for (var i = 0; i < data.length; i++) {\n    var d = data[i],\n        o = {};\n\n    for (var j = 0; j < l; j++) o[cols[j]] = d[j];\n\n    formatted.push(o);\n  }\n\n  return formatted;\n};\n\nMediaService.wrapPromise = promise => {\n  let status = \"pending\";\n  let result;\n  let suspender = promise.then(r => {\n    status = \"success\";\n    result = r;\n  }, e => {\n    status = \"error\";\n    result = e;\n  });\n  return {\n    read() {\n      if (status === \"pending\") {\n        throw suspender;\n      } else if (status === \"error\") {\n        throw result;\n      } else if (status === \"success\") {\n        return result;\n      }\n    }\n\n  };\n};\n\nMediaService.getVideoInformation = () => {\n  console.log(GETURL + \"/getvideo\");\n  var promise = fetch(GETURL + \"/getvideo\").then(result => {\n    return result.json().then(result => {\n      return MediaService.arrToObject(result);\n    }).catch(err => {\n      console.log(err);\n      throw err;\n    });\n  }).catch(err => {\n    console.log(err);\n    throw err;\n  });\n  return promise;\n};","map":{"version":3,"sources":["/home/landonrepp/Desktop/Cecil Reborn/Client/Cecil/src/services/MediaService.ts"],"names":["GETURL","MediaService","arrToObject","arr","keys","newArr","slice","length","formatted","data","cols","l","i","d","o","j","push","wrapPromise","promise","status","result","suspender","then","r","e","read","getVideoInformation","console","log","fetch","json","catch","err"],"mappings":"AAAA,SAAQA,MAAR,QAAqB,cAArB;AACA,OAAO,MAAMC,YAAN,CAAmB;;AAAbA,Y,CAEFC,W,GAAmBC,GAAD,IAAe;AACpC;AACA,MAAIC,IAAI,GAAGD,GAAG,CAAC,CAAD,CAAd,CAFoC,CAGpC;;AACA,MAAIE,MAAM,GAAGF,GAAG,CAACG,KAAJ,CAAU,CAAV,EAAaH,GAAG,CAACI,MAAjB,CAAb;AAEA,MAAIC,SAAS,GAAG,EAAhB;AAAA,MACAC,IAAI,GAAGJ,MADP;AAAA,MAEAK,IAAI,GAAGN,IAFP;AAAA,MAGAO,CAAC,GAAGD,IAAI,CAACH,MAHT;;AAIA,OAAK,IAAIK,CAAC,GAAC,CAAX,EAAcA,CAAC,GAACH,IAAI,CAACF,MAArB,EAA6BK,CAAC,EAA9B,EAAkC;AAC1B,QAAIC,CAAC,GAAGJ,IAAI,CAACG,CAAD,CAAZ;AAAA,QACQE,CAAK,GAAG,EADhB;;AAEA,SAAK,IAAIC,CAAC,GAAC,CAAX,EAAcA,CAAC,GAACJ,CAAhB,EAAmBI,CAAC,EAApB,EACQD,CAAC,CAACJ,IAAI,CAACK,CAAD,CAAL,CAAD,GAAaF,CAAC,CAACE,CAAD,CAAd;;AACRP,IAAAA,SAAS,CAACQ,IAAV,CAAeF,CAAf;AACP;;AACD,SAAON,SAAP;AACH,C;;AApBQP,Y,CAqBFgB,W,GAAeC,OAAD,IAA0B;AAC3C,MAAIC,MAAM,GAAG,SAAb;AACA,MAAIC,MAAJ;AACA,MAAIC,SAAS,GAAGH,OAAO,CAACI,IAAR,CACdC,CAAC,IAAI;AACHJ,IAAAA,MAAM,GAAG,SAAT;AACAC,IAAAA,MAAM,GAAGG,CAAT;AACD,GAJa,EAKdC,CAAC,IAAI;AACHL,IAAAA,MAAM,GAAG,OAAT;AACAC,IAAAA,MAAM,GAAGI,CAAT;AACD,GARa,CAAhB;AAUA,SAAO;AACLC,IAAAA,IAAI,GAAG;AACL,UAAIN,MAAM,KAAK,SAAf,EAA0B;AACxB,cAAME,SAAN;AACD,OAFD,MAEO,IAAIF,MAAM,KAAK,OAAf,EAAwB;AAC7B,cAAMC,MAAN;AACD,OAFM,MAEA,IAAID,MAAM,KAAK,SAAf,EAA0B;AAC/B,eAAOC,MAAP;AACD;AACF;;AATI,GAAP;AAWD,C;;AA7CMnB,Y,CAgDFyB,mB,GAAiC,MAAI;AACxCC,EAAAA,OAAO,CAACC,GAAR,CAAY5B,MAAM,GAAC,WAAnB;AACA,MAAIkB,OAAO,GAAGW,KAAK,CAAC7B,MAAM,GAAC,WAAR,CAAL,CACbsB,IADa,CACPF,MAAD,IAAU;AACZ,WAAOA,MAAM,CAACU,IAAP,GACNR,IADM,CACDF,MAAM,IAAE;AACV,aAAOnB,YAAY,CAACC,WAAb,CAAyBkB,MAAzB,CAAP;AACH,KAHM,EAINW,KAJM,CAIAC,GAAG,IAAE;AACRL,MAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ;AACA,YAAMA,GAAN;AACH,KAPM,CAAP;AAQH,GAVa,EAWbD,KAXa,CAWNC,GAAD,IAAO;AACVL,IAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ;AACA,UAAMA,GAAN;AACH,GAda,CAAd;AAeA,SAAOd,OAAP;AACH,C","sourcesContent":["import {GETURL} from '../Constants'\nexport class MediaService {\n    //convert 2d arrray created by csv file/ sql table into json object\n    static arrToObject:any = (arr:any[][])=>{\n        //assuming header\n        var keys = arr[0];\n        //vacate keys from main array\n        var newArr = arr.slice(1, arr.length);\n    \n        var formatted = [],\n        data = newArr,\n        cols = keys,\n        l = cols.length;\n        for (var i=0; i<data.length; i++) {\n                var d = data[i],\n                        o:any = {};\n                for (var j=0; j<l; j++)\n                        o[cols[j]] = d[j];\n                formatted.push(o);\n        }\n        return formatted;\n    }\n    static wrapPromise = (promise:Promise<any>) => {\n        let status = \"pending\";\n        let result:any;\n        let suspender = promise.then(\n          r => {\n            status = \"success\";\n            result = r;\n          },\n          e => {\n            status = \"error\";\n            result = e;\n          }\n        );\n        return {\n          read() {\n            if (status === \"pending\") {\n              throw suspender;\n            } else if (status === \"error\") {\n              throw result;\n            } else if (status === \"success\") {\n              return result;\n            }\n          }\n        };\n      }\n    \n\n    static getVideoInformation: () => any = ()=>{\n        console.log(GETURL+\"/getvideo\");\n        var promise = fetch(GETURL+\"/getvideo\")\n        .then((result)=>{\n            return result.json()\n            .then(result=>{\n                return MediaService.arrToObject(result);\n            })\n            .catch(err=>{\n                console.log(err);\n                throw err;\n            })\n        })\n        .catch((err)=>{\n            console.log(err);\n            throw err;\n        })\n        return promise;\n    }\n\n}"]},"metadata":{},"sourceType":"module"}